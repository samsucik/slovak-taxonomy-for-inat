const nameMapping = {'kozobrada kyjačikovitá': {'sciName': 'Tragopogon dubius', 'newCommonName': 'kozia brada kyjačikovitá'}, 'nevädzka porýnska': {'sciName': 'Centaurea stoebe', 'newCommonName': 'nevädza porýnska'}, 'nevädzník hlaváčovitý': {'sciName': 'Colymbada scabiosa', 'newCommonName': 'nevädza hlaváčovitá'}, 'ibištek sýrsky': {'sciName': 'Hibiscus syriacus', 'newCommonName': 'ibištek krovitý'}, 'rumanovec farbiarsky': {'sciName': 'Cota tinctoria', 'newCommonName': 'ruman farbiarsky'}, 'zápalička väčšia': {'sciName': 'Tordylium maximum', 'newCommonName': 'zápalička najväčšia'}, 'ostružina ožinová': {'sciName': 'Rubus caesius', 'newCommonName': 'ostružina sivobelasá'}, 'štetôčka srstnatá': {'sciName': 'Dipsacus strigosus', 'newCommonName': 'štetka štetinatá'}, 'dúška tymianová': {'sciName': 'Thymus vulgaris', 'newCommonName': 'materina dúška obyčajná'}, 'rebríček túžobníkový': {'sciName': 'Achillea filipendulina', 'newCommonName': 'rebríček túžobníkovitý'}, 'turanec kanadský': {'sciName': 'Erigeron canadensis', 'newCommonName': 'turica kanadská'}, 'ďatelina purpurová': {'sciName': 'Trifolium incarnatum', 'newCommonName': 'ďatelina bledokarmínová'}, 'čerešňa mahalebková': {'sciName': 'Prunus mahaleb', 'newCommonName': 'mahalebka obyčajná'}, 'hadokoreň sivý': {'sciName': 'Podospermum canum', 'newCommonName': 'hadí koreň sivý'}, 'čerešňa višňová': {'sciName': 'Prunus cerasus', 'newCommonName': 'višňa obyčajná'}, 'cesnak pažítkový': {'sciName': 'Allium schoenoprasum', 'newCommonName': 'pažítka jedlá'}, 'divozel tmavočervený': {'sciName': 'Verbascum phoeniceum', 'newCommonName': 'divozel fialový'}, 'štiav lúčny': {'sciName': 'Rumex acetosa', 'newCommonName': 'štiav kyslý'}, 'arábka strmobyľová': {'sciName': 'Turritis glabra', 'newCommonName': 'strmobyľ holá'}, 'astra kopijovitolistá': {'sciName': 'Symphyotrichum lanceolatum', 'newCommonName': 'astra kopijovitá'}, 'astra krovinatá': {'sciName': 'Symphyotrichum dumosum', 'newCommonName': 'astra krovisková'}, 'bledavka ihlanovitá': {'sciName': 'Ornithogalum brevistylum', 'newCommonName': 'bledavka krátkočnelková'}, 'budleja Dávidova': {'sciName': 'Buddleja davidii', 'newCommonName': 'budleja Davidova'}, 'citrónovníkovec trojlistý': {'sciName': 'Citrus trifoliata', 'newCommonName': 'citrónovník trojlístkový'}, 'kosatček sieťkovaný': {'sciName': 'Iris reticulata', 'newCommonName': 'kosatec sieťkovaný'}, 'krásnoočko farbiarske': {'sciName': 'Coreopsis tinctoria', 'newCommonName': 'kráska farbiarska'}, 'šošovica jedlá': {'sciName': 'Lens culinaris', 'newCommonName': 'šošovica kuchynská'}, 'kysličkovec rožkatý': {'sciName': 'Oxalis corniculata', 'newCommonName': 'kyslička rožkatá'}, 'rumanček kamilkový': {'sciName': 'Matricaria chamomilla', 'newCommonName': 'rumanček pravý'}, 'rozchodník plazivý': {'sciName': 'Sedum sarmentosum', 'newCommonName': 'rozchodník poplazový'}, 'pupalka dvojročná': {'sciName': 'Oenothera rubricaulis', 'newCommonName': 'pupalka červenobyľová'}, 'veternica vznešená': {'sciName': 'Anemone blanda', 'newCommonName': 'veternica vábivá'}, 'mohár praslenatý': {'sciName': 'Setaria verticilliformis', 'newCommonName': 'bar klamný'}, 'mohár zelený': {'sciName': 'Setaria viridis', 'newCommonName': 'bar zelený'}, 'modrica strapcovitá': {'sciName': 'Muscari atlanticum', 'newCommonName': 'modrica atlantická'}, 'pór záhradný': {'sciName': 'Allium porrum', 'newCommonName': 'pór pestovaný'}, 'slamiha slamienková': {'sciName': 'Xerochrysum bracteatum', 'newCommonName': 'slamienka listenatá'}, 'cesnak': {'sciName': 'Allium', 'newCommonName': 'cesnak, cibuľa, pažítka, pór'}, 'jahoda drúzgavicová': {'sciName': 'Fragaria moschata', 'newCommonName': 'jahoda vyššia'}, 'ostružina malinová': {'sciName': 'Rubus idaeus', 'newCommonName': 'malina obyčajná'}, 'žitniak hrebenitý': {'sciName': 'Agropyron cristatum', 'newCommonName': 'žitniak hrebenatý'}, 'turica ostrozubá': {'sciName': 'Erigeron strigosus', 'newCommonName': 'turica štetinatá'}, 'divozel južný': {'sciName': 'Verbascum chaixii', 'newCommonName': 'divozel Chaixov'}, 'cesnak člnkovitý': {'sciName': 'Allium carinatum', 'newCommonName': 'cesnak kýlnatý'}, 'blšník červienkový': {'sciName': 'Pulicaria dysenterica', 'newCommonName': 'blšník úplavičný'}, 'horčík jastrabníkolistý': {'sciName': 'Picris hieracioides', 'newCommonName': 'horčík jastrabníkovitý'}, 'leknovec štítnatý': {'sciName': 'Nymphoides peltata', 'newCommonName': 'leknovec štítovitý'}, 'pohánkovec': {'sciName': 'Reynoutria', 'newCommonName': 'krídlatka'}, 'bledavka hrebenitá': {'sciName': 'Ornithogalum boucheanum', 'newCommonName': 'bledavka Bouchého'}, 'lipnica cibuľkatá': {'sciName': 'Poa crassipes', 'newCommonName': 'lipnica vršatská'}, 'strmobyľka ovisnutá': {'sciName': 'Pseudoturritis turrita', 'newCommonName': 'strmobyľka previsnutá'}, 'vachta trojlistá': {'sciName': 'Menyanthes trifoliata', 'newCommonName': 'vachta trojlístková'}, 'kostrava žliabkatá': {'sciName': 'Festuca saxatilis', 'newCommonName': 'kostrava skalná'}, 'kortúza Mattioliho': {'sciName': 'Cortusa matthioli', 'newCommonName': 'kortúza Matthioliho'}, 'arábovka': {'sciName': 'Arabidopsis', 'newCommonName': 'arábkovka'}, 'voškovník pobrežný': {'sciName': 'Xanthium albinum', 'newCommonName': 'voškovník polabský'}, 'voškovník talianský': {'sciName': 'Xanthium italicum', 'newCommonName': 'voškovník taliansky'}, 'starček vajcovitolistý': {'sciName': 'Senecio ovatus', 'newCommonName': 'starček vajcovitý'}, 'kostihoj srdcovitolistý': {'sciName': 'Symphytum cordatum', 'newCommonName': 'kostihoj srdcovitý'}, 'veronika prímorská': {'sciName': 'Veronica longifolia', 'newCommonName': 'veronika dlholistá'}, 'timotejka švajčiarska': {'sciName': 'Phleum alpinum', 'newCommonName': 'timotejka alpínska'}, 'päťprstnica': {'sciName': 'Nigritella', 'newCommonName': 'tmavohlávka'}, 'rebríček bertrámový': {'sciName': 'Achillea ptarmica', 'newCommonName': 'rebríček bertramový'}, 'mechúrnik stromovitý': {'sciName': 'Colutea arborescens', 'newCommonName': 'mechúrnik stromčekovitý'}, 'ľadenec Borbášov': {'sciName': 'Lotus borbasii', 'newCommonName': 'ľadenec Borbásov'}, 'ostrica Hartmanova': {'sciName': 'Carex hartmaniorum', 'newCommonName': 'ostrica Hartmannovcov'}, 'centrant červený': {'sciName': 'Valeriana rubra', 'newCommonName': 'valeriána červená'}, 'zvonček lekársky': {'sciName': 'Campanula cervicaria', 'newCommonName': 'zvonček hrdlohojivý'}, 'kamzičník chlpatý': {'sciName': 'Doronicum clusii', 'newCommonName': 'kamzičník Clusiov'}, 'záraza väčšia': {'sciName': 'Orobanche elatior', 'newCommonName': 'záraza vysoká'}, 'tomka': {'sciName': 'Hierochloë', 'newCommonName': 'tomkovica'}, 'voškovník': {'sciName': 'Ceroxylon', 'newCommonName': 'voskovník'}};

function sleep(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}

function createNote(scientificName) {
  var note = null;
  // note = `Adding a missing common name for ${scientificName}. Source: ZOZNAM MOTÝĽOV (LEPIDOPTERA) ZISTENÝCH NA SLOVENSKU (CHECKLIST OF LEPIDOPTERA RECORDED IN SLOVAKIA). Entomofauna carpathica, 2022, 34 (Supplementum 2): 1-181. Accessed at https://entomospol.sk/suplements/priloha-c-2/`;
  // note = `Adding a missing common name for ${scientificName}. Source: Ferianc, O. (1975). Slovenské mená hmyzu. Slovensko: Veda.`;
  note = `Changing the common name to align with the newest nomenclature. Source: Kliment J., Hrabovský M., Letz D. R., Eliáš P. ml., Kučera J., Mártonfi P., Guričanová D., Vančová I., Feráková V., Goliašová K., Hodálová I., Kochjarová J., Marhold K., Turisová I. 2024+: Databáza slovenského botanického menoslovia – cievnaté rastliny. https://slovakplantnames.sav.sk Accessed November 2025. Database entry for ${scientificName}`;
  if (note == null) {
    alert("Looks like you forgot to define a note for this taxon change in the file 'autofill_common_name_form.js'!")
  }
  return note;
}


async function autofillEditingCommonNameForm() {
  const currentCommonName = document.querySelector("h2").innerText.replace(/.*Editing Taxon Name "(.*)" for.*/, '$1');
  const expectedSciName = nameMapping[currentCommonName]["sciName"];
  const sciName = document.querySelector("h2 .sciname").innerText;
  if (expectedSciName != sciName) {
    console.log(`Expected to find ${expectedSciName} but found ${sciName}`);
    return;
  }

  const newCommonName = nameMapping[currentCommonName]["newCommonName"];
  const nameInput = document.querySelector("#taxon_name_name");
  if (nameInput) {
    nameInput.value = newCommonName;
  }
  const note = createNote(sciName);
  const noteInput = document.querySelector("#taxon_name_audit_comment");
  if (noteInput) {
    noteInput.value = note;
  }
}

autofillEditingCommonNameForm();
